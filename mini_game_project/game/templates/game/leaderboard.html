{% extends 'game/base.html' %}
{% block title %}Leaderboard - Reaction Rush{% endblock %}
{% block content %}
{% load static %}
<h2 class="text-2xl font-semibold mb-4">Leaderboard</h2>
<p class="mb-4">Here are the top scores. Can you beat them?</p>

<div id="today" class="mb-6">
    <h3 class="text-xl font-semibold mb-2">Top 10 Today</h3>
    <table class="min-w-full bg-white border border-gray-300">
        <thead>
            <tr class="bg-gray-100">
                <th class="px-2 py-1 text-left">#</th>
                <th class="px-2 py-1 text-left">Player</th>
                <th class="px-2 py-1 text-left">Score</th>
                <th class="px-2 py-1 text-left">Time</th>
            </tr>
        </thead>
        <tbody>
            {% for s in top_today %}
            <tr class="border-t">
                <td class="px-2 py-1">{{ forloop.counter }}</td>
                <td class="px-2 py-1">
                    <a href="{% url 'game:player_profile' s.player.id %}" class="text-blue-600 hover:underline">{{ s.player.name }}</a>
                </td>
                <td class="px-2 py-1">{{ s.score }}</td>
                <td class="px-2 py-1">{{ s.ended_at|date:"H:i:s" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="px-2 py-2 text-center">No scores today yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div id="week" class="mb-6">
    <h3 class="text-xl font-semibold mb-2">Top 10 This Week</h3>
    <table class="min-w-full bg-white border border-gray-300">
        <thead>
            <tr class="bg-gray-100">
                <th class="px-2 py-1 text-left">#</th>
                <th class="px-2 py-1 text-left">Player</th>
                <th class="px-2 py-1 text-left">Score</th>
                <th class="px-2 py-1 text-left">When</th>
            </tr>
        </thead>
        <tbody>
            {% for s in top_week %}
            <tr class="border-t">
                <td class="px-2 py-1">{{ forloop.counter }}</td>
                <td class="px-2 py-1">
                    <a href="{% url 'game:player_profile' s.player.id %}" class="text-blue-600 hover:underline">{{ s.player.name }}</a>
                </td>
                <td class="px-2 py-1">{{ s.score }}</td>
                <td class="px-2 py-1">{{ s.ended_at|date:"D H:i" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="px-2 py-2 text-center">No scores this week yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div id="all" class="mb-6">
    <h3 class="text-xl font-semibold mb-2">Top 10 All Time</h3>
    <table class="min-w-full bg-white border border-gray-300">
        <thead>
            <tr class="bg-gray-100">
                <th class="px-2 py-1 text-left">#</th>
                <th class="px-2 py-1 text-left">Player</th>
                <th class="px-2 py-1 text-left">Score</th>
                <th class="px-2 py-1 text-left">Date</th>
            </tr>
        </thead>
        <tbody>
            {% for s in top_all %}
            <tr class="border-t">
                <td class="px-2 py-1">{{ forloop.counter }}</td>
                <td class="px-2 py-1">
                    <a href="{% url 'game:player_profile' s.player.id %}" class="text-blue-600 hover:underline">{{ s.player.name }}</a>
                </td>
                <td class="px-2 py-1">{{ s.score }}</td>
                <td class="px-2 py-1">{{ s.ended_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="px-2 py-2 text-center">No scores yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if my_best %}
<div class="mb-6">
    <h3 class="text-xl font-semibold mb-2">My Best</h3>
    <p>Your best score: <span class="font-bold">{{ my_best.score }}</span> achieved on {{ my_best.ended_at|date:"Y-m-d H:i" }}</p>
</div>
{% endif %}
{% endblock %}